{
  "version": 3,
  "sources": ["../src/navigation.tsx"],
  "sourcesContent": ["\"use client\";\n\nimport React from \"react\";\n\ntype BasenameOption = {\n  basename?: string;\n};\n\ntype RouterLike = {\n  push: (href: string) => void;\n  replace: (href: string) => void;\n};\n\nfunction getDefaultBasename() {\n  const globalValue = (globalThis as { __RSC_BASENAME?: string }).__RSC_BASENAME;\n  if (globalValue && globalValue !== \"/\") {\n    return globalValue;\n  }\n\n  if (typeof window === \"undefined\") {\n    return \"\";\n  }\n\n  const value = (window as Window & { __RSC_BASENAME?: string }).__RSC_BASENAME;\n  return value && value !== \"/\" ? value : \"\";\n}\n\nfunction getClientRouter(): RouterLike | null {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n\n  const value = (window as Window & { __WEBFRAMEZ_ROUTER__?: RouterLike }).__WEBFRAMEZ_ROUTER__;\n  return value ?? null;\n}\n\nfunction withLeadingSlash(value: string) {\n  return value.startsWith(\"/\") ? value : `/${value}`;\n}\n\nfunction normalizeBase(base?: string) {\n  if (!base || base.trim() === \"\" || base === \"/\") {\n    return \"\";\n  }\n\n  const withSlash = withLeadingSlash(base.trim());\n  return withSlash.endsWith(\"/\") ? withSlash.slice(0, -1) : withSlash;\n}\n\nfunction isExternal(href: string) {\n  return /^[a-zA-Z][a-zA-Z\\d+\\-.]*:/.test(href) || href.startsWith(\"//\");\n}\n\nfunction resolveHref(to: string, basename?: string) {\n  if (!to || to.trim() === \"\") {\n    return \"/\";\n  }\n\n  const trimmed = to.trim();\n  if (isExternal(trimmed) || trimmed.startsWith(\"#\")) {\n    return trimmed;\n  }\n\n  const [pathPart, hashPart] = trimmed.split(\"#\", 2);\n  const [pathnamePart, queryPart] = pathPart.split(\"?\", 2);\n  const pathname = withLeadingSlash(pathnamePart || \"/\");\n  const base = normalizeBase(basename);\n\n  let resolvedPath = pathname;\n  if (base && pathname !== \"/\" && !pathname.startsWith(`${base}/`) && pathname !== base) {\n    resolvedPath = `${base}${pathname}`;\n  } else if (base && pathname === \"/\") {\n    resolvedPath = base;\n  }\n\n  const query = queryPart ? `?${queryPart}` : \"\";\n  const hash = hashPart ? `#${hashPart}` : \"\";\n  return `${resolvedPath}${query}${hash}`;\n}\n\nexport type LinkProps = Omit<React.AnchorHTMLAttributes<HTMLAnchorElement>, \"href\"> & {\n  to: string;\n  basename?: string;\n};\n\nexport function Link({ to, basename, onClick, ...rest }: LinkProps) {\n  const resolvedHref = resolveHref(to, basename ?? getDefaultBasename());\n\n  return (\n    <a\n      {...rest}\n      href={resolvedHref}\n      onClick={(event) => {\n        onClick?.(event);\n        if (event.defaultPrevented) {\n          return;\n        }\n        if (event.button !== 0 || event.metaKey || event.ctrlKey || event.shiftKey || event.altKey) {\n          return;\n        }\n        if (rest.target && rest.target !== \"_self\") {\n          return;\n        }\n        if (isExternal(resolvedHref)) {\n          return;\n        }\n\n        const router = getClientRouter();\n        if (!router) {\n          return;\n        }\n\n        event.preventDefault();\n        router.push(resolvedHref);\n      }}\n    />\n  );\n}\n\nexport type RedirectProps = BasenameOption & {\n  to: string;\n  replace?: boolean;\n};\n\nexport function Redirect({ to, basename, replace = true }: RedirectProps) {\n  const resolvedHref = resolveHref(to, basename ?? getDefaultBasename());\n\n  if (typeof window !== \"undefined\") {\n    const currentHref = `${window.location.pathname}${window.location.search}${window.location.hash}`;\n    if (resolvedHref !== currentHref) {\n      setTimeout(() => {\n        if (isExternal(resolvedHref)) {\n          if (replace) {\n            window.location.replace(resolvedHref);\n          } else {\n            window.location.assign(resolvedHref);\n          }\n          return;\n        }\n\n        const router = getClientRouter();\n        if (router) {\n          if (replace) {\n            router.replace(resolvedHref);\n          } else {\n            router.push(resolvedHref);\n          }\n          return;\n        }\n\n        if (replace) {\n          window.location.replace(resolvedHref);\n        } else {\n          window.location.assign(resolvedHref);\n        }\n      }, 0);\n    }\n  }\n\n  return null;\n}\n"],
  "mappings": "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",
  "names": []
}
